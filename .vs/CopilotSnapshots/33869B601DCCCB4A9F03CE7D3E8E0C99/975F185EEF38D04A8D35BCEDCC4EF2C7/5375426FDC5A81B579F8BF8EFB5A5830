using Gestion_Cursos.Controllers;
using Gestion_Cursos.Models;
using Sistema_Gestion_Cursos.Views.Principal;
using System.Text.RegularExpressions;

namespace Gestion_Cursos
{
    public partial class frm_login : Form
    {
        private readonly Login_Controller _login_Controller = new Login_Controller();
        public frm_login()
        {
            InitializeComponent();
        }

        private void btn_Login_Click(object sender, EventArgs e)
        {
            Credenciale cred = new Credenciale()
            {
                Correo = txt_Correo.Text.Trim(),
                Contrasenia = txt_Pwd.Text.Trim()
            };
            Credenciale login = new _login_Controller.login(cred);
            var dash = new frm_dashboard();
            dash.Show();
            this.Hide();
        }

        private void btn_Cancelar_Click(object sender, EventArgs e)
        {
            txt_Correo.Text = string.Empty;
            txt_Pwd.Text = string.Empty;
        }

        private void txt_Pwd_Leave(object sender, EventArgs e)
        {
            bool ok = Regex.IsMatch(txt_Correo.Text,
                @"^[^@\s]+@[^@\s]+\.[^@\s]+$",
                RegexOptions.IgnoreCase);
            if (!ok)
            {
                txt_Correo.Text = "";
                txt_Correo.Focus();
                MessageBox.Show("El correo no tiene un formato válido");
            }
        }
    }
}
